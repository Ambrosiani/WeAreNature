<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Poll</title>
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="js/jquery-3.2.1.min.js" charset="utf-8"></script>
    <script>
      // IMPORTS
      var {ipcRenderer, remote} = require('electron');
      var main = remote.require("./main.js");

      // EVENT LISTENERS
      ipcRenderer.on('voteSuccessful', (event, arg) => {
        renderPoll();
      });

      // FUNCTIONS
      function renderPoll() {
        $("#poll").empty();
        for (category in main.categories) {
          var count = $("<span>");
          count.html(main.votes[category]);
          $("#poll").append('<span>'+category+'  <span>');
          $("#poll").append(count);
          $("#poll").append('<br>');
        }
      }

      // ON READY
      $(document).ready(function() {
        renderPoll();
      });
    </script>
    <script>
      // You can also require other files to run in this process
      require('./renderer.js')
    </script>

    <!-- Insert this line after script imports -->
    <script>if (window.module) module = window.module;</script>
  </head>
  <body>
    <div id="poll" class="inner">
    </div>
  </body>
</html>
